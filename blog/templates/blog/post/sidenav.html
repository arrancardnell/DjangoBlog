{% load blog_tags %}

<h4 class="text-center"><b>Welcome to <span class="highlight">Let's Code Django!</span></b></h4>

<p>
    Want to learn Django? Been through a couple of introductory tutorials but unsure what to do next?
    Find a project you're interested in and Let's Code Django together.
</p>
<p>
    <a href="{% url 'blog:post_feed' %}">Subscribe to my RSS feed</a>
</p>
<p>
    There are <span class="highlight">{% total_posts %}</span> posts so far.
</p>

<div id="latest-posts" class="list-group">
    <h3>Latest posts</h3>
    {% show_latest_posts 3 as latest_posts %}
    {% for post in latest_posts %}
        <a href="{{ post.get_absolute_url }}" class="list-group-item">
            <h4 class="list-group-item-heading">{{ post.title }}</h4>
            <p class="list-group-item-text">
                By {{ post.author.first_name.0 }}.{{ post.author.last_name }}
                <span class="pull-right">
                    <span class="glyphicon glyphicon-heart-empty"></span> {{ post.likes }}
                    <span class="glyphicon glyphicon-eye-open"></span> {{ post.views }}
                    <span class="glyphicon glyphicon-comment"></span> {{ post.comments.count }}
                </span>
            </p>
        </a>
    {% endfor %}
</div>

<div id="most-commented-posts" class="list-group">
    <h3>Most commmented posts</h3>
    {% get_most_commented_posts 3 as most_commented_posts%}
    {% for post in most_commented_posts %}
        <a href="{{ post.get_absolute_url }}" class="list-group-item">
            <h4 class="list-group-item-heading">{{ post.title }}</h4>
            <p class="list-group-item-text">
                By {{ post.author.first_name.0 }}.{{ post.author.last_name }}
                <span class="pull-right">
                    <span class="glyphicon glyphicon-heart-empty"></span> {{ post.likes }}
                    <span class="glyphicon glyphicon-eye-open"></span> {{ post.views }}
                    <span class="glyphicon glyphicon-comment"></span> {{ post.comments.count }}
                </span>
            </p>
        </a>
    {% endfor %}
</div>